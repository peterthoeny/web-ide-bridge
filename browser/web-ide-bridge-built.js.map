{"version":3,"file":"web-ide-bridge-built.js","mappings":"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oD,YAAY;IAC1B,IAAI,CAACnD,WAAW,GAAG,IAAI;EACzB;;EAEA;AACF;AACA;EACEuD,sBAAsBA,CAAA,EAAG;IACvB,OAAO;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;EACH;;EAEA;AACF;AACA;EACEC,uBAAuBA,CAAA,EAAG;IACxB,OAAO;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;EACH;;EAEA;AACF;AACA;EACEtC,yBAAyBA,CAACF,MAAM,EAAE;IAChC,IAAI2C,QAAQ,GAAGP,QAAQ,CAACQ,gBAAgB,CAAC5C,MAAM,CAACX,QAAQ,CAAC;;IAEzD;IACAsD,QAAQ,GAAGE,KAAK,CAACC,IAAI,CAACH,QAAQ,CAAC,CAACI,MAAM,CAACC,OAAO,IAAI;MAChD,IAAIhD,MAAM,CAACL,eAAe,IAAIqD,OAAO,CAACC,OAAO,CAACjD,MAAM,CAACL,eAAe,CAAC,EAAE;QACrE,OAAO,KAAK;MACd;MACA,IAAIK,MAAM,CAACJ,mBAAmB,IAAI,CAACoD,OAAO,CAACC,OAAO,CAACjD,MAAM,CAACJ,mBAAmB,CAAC,EAAE;QAC9E,OAAO,KAAK;MACd;MACA,OAAO,IAAI;IACb,CAAC,CAAC;IAEF+C,QAAQ,CAAC7B,OAAO,CAACoC,QAAQ,IAAI;MAC3B,IAAI,CAACA,QAAQ,CAACtC,EAAE,EAAE;QAChBsC,QAAQ,CAACtC,EAAE,GAAG,0BAA0B,GAAGpC,uDAAY,CAAC,CAAC;MAC3D;;MAE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","sources":["webpack://WebIdeBridge/./src/ui.js","webpack://WebIdeBridge/./src/utils.js","webpack://WebIdeBridge/webpack/bootstrap","webpack://WebIdeBridge/webpack/runtime/define property getters","webpack://WebIdeBridge/webpack/runtime/hasOwnProperty shorthand","webpack://WebIdeBridge/webpack/runtime/make namespace object","webpack://WebIdeBridge/./src/client.js"],"sourcesContent":["import { generateUUID } from './utils.js';\n\n/**\n * UI Manager for Web-IDE-Bridge\n * Handles automatic button injection and UI interactions\n */\nexport class UIManager {\n  constructor(webIdeBridge) {\n    this.webIdeBridge = webIdeBridge;\n    this.injectedButtons = new Map(); // textareaId -> button element\n    this.observers = [];\n    this.styles = null;\n    this.initialized = false;\n    this.statusCallbackRegistered = false; // Track if we've already registered status callback\n  }\n\n  /**\n   * Auto-inject \"Edit in IDE\" buttons for textareas\n   */\n  autoInjectButtons(options = {}) {\n    const defaultOptions = {\n      selector: 'textarea',\n      buttonText: 'Edit in IDE ↗',\n      buttonClass: 'web-ide-bridge-btn',\n      position: 'after', // 'after', 'before', 'append'\n      fileTypeAttribute: 'data-type',\n      defaultFileType: 'txt',\n      excludeSelector: '.web-ide-bridge-exclude',\n      includeOnlySelector: null,\n      watchForChanges: true,\n      style: 'modern', // 'modern', 'minimal', 'custom'\n      showFileTypeSelector: false // Disable file type selectors\n    };\n\n    const config = { ...defaultOptions, ...options };\n\n    this._initializeStyles(config.style);\n    this._injectButtonsForSelector(config);\n\n    if (config.watchForChanges) {\n      this._watchForDOMChanges(config);\n    }\n\n    return {\n      refresh: () => this._injectButtonsForSelector(config),\n      destroy: () => this.removeAllButtons()\n    };\n  }\n\n  /**\n   * Manually inject button for specific textarea\n   */\n  injectButton(textareaElement, options = {}) {\n    if (!textareaElement || textareaElement.tagName !== 'TEXTAREA') {\n      throw new Error('Element must be a textarea');\n    }\n\n    const defaultOptions = {\n      buttonText: 'Edit in IDE ↗',\n      buttonClass: 'web-ide-bridge-btn',\n      position: 'after',\n      fileType: 'txt',\n      style: 'modern'\n    };\n\n    const config = { ...defaultOptions, ...options };\n\n    this._initializeStyles(config.style);\n\n    // Generate ID if textarea doesn't have one\n    if (!textareaElement.id) {\n      textareaElement.id = 'web-ide-bridge-textarea-' + generateUUID();\n    }\n\n    return this._createAndInjectButton(textareaElement, config);\n  }\n\n  /**\n   * Remove all injected buttons\n   */\n  removeAllButtons() {\n    this.injectedButtons.forEach(button => {\n      if (button.parentNode) {\n        button.parentNode.removeChild(button);\n      }\n    });\n    this.injectedButtons.clear();\n\n    // Stop observers\n    this.observers.forEach(observer => observer.disconnect());\n    this.observers = [];\n\n    // Remove styles\n    if (this.styles && this.styles.parentNode) {\n      this.styles.parentNode.removeChild(this.styles);\n      this.styles = null;\n    }\n  }\n\n  /**\n   * Remove button for specific textarea\n   */\n  removeButton(textareaId) {\n    const button = this.injectedButtons.get(textareaId);\n    if (button && button.parentNode) {\n      button.parentNode.removeChild(button);\n      this.injectedButtons.delete(textareaId);\n    }\n  }\n\n  /**\n   * Update button states based on connection status\n   */\n  updateButtonStates(connected) {\n    this.injectedButtons.forEach((button, textareaId) => {\n      this._updateButtonState(button, connected);\n    });\n  }\n\n  /**\n   * Update individual button state based on connection status\n   */\n  _updateButtonState(button, connected = null) {\n    // Button should be enabled if server is connected, regardless of desktop connection\n    // Desktop connection is only needed for roundtrip functionality\n    const serverConnected = connected !== null ? connected : this.webIdeBridge.isConnected();\n    \n\n    \n    button.disabled = !serverConnected;\n    \n    // Always keep the original button text\n    button.textContent = button.dataset.originalText || 'Edit in IDE ↗';\n    \n    if (serverConnected) {\n      button.title = '';\n    } else {\n      button.title = 'Web-IDE-Bridge server is not connected. Please connect first.';\n    }\n    \n\n  }\n\n  // Private methods\n\n  /**\n   * Initialize CSS styles for buttons\n   */\n  _initializeStyles(style) {\n    if (this.styles || this.initialized) return;\n\n    const styleElement = document.createElement('style');\n    styleElement.id = 'web-ide-bridge-styles';\n\n    let css = '';\n\n    switch (style) {\n      case 'modern':\n        css = this._getModernButtonStyles();\n        break;\n      case 'minimal':\n        css = this._getMinimalButtonStyles();\n        break;\n      default:\n        css = this._getModernButtonStyles();\n    }\n\n    styleElement.textContent = css;\n    document.head.appendChild(styleElement);\n    this.styles = styleElement;\n    this.initialized = true;\n  }\n\n  /**\n   * Modern button styles matching the demo page\n   */\n  _getModernButtonStyles() {\n    return `\n      .web-ide-bridge-btn {\n        background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);\n        color: white;\n        border: none;\n        padding: 0.75rem 1.5rem;\n        border-radius: 8px;\n        font-weight: 600;\n        font-size: 0.875rem;\n        cursor: pointer;\n        transition: all 0.3s ease;\n        display: inline-flex;\n        align-items: center;\n        gap: 0.5rem;\n        margin: 0.5rem 0;\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n        text-decoration: none;\n        outline: none;\n      }\n\n      .web-ide-bridge-btn:hover:not(:disabled) {\n        transform: translateY(-1px);\n        box-shadow: 0 4px 12px rgba(79, 70, 229, 0.3);\n      }\n\n      .web-ide-bridge-btn:active:not(:disabled) {\n        transform: translateY(0);\n      }\n\n      .web-ide-bridge-btn:disabled {\n        background: #9ca3af;\n        cursor: not-allowed;\n        transform: none;\n        box-shadow: none;\n      }\n\n      .web-ide-bridge-btn:focus {\n        box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.3);\n      }\n\n      .web-ide-bridge-container {\n        display: flex;\n        gap: 0.75rem;\n        align-items: center;\n        margin-top: 0.5rem;\n        flex-wrap: wrap;\n      }\n    `;\n  }\n\n  /**\n   * Minimal button styles\n   */\n  _getMinimalButtonStyles() {\n    return `\n      .web-ide-bridge-btn {\n        background: #4f46e5;\n        color: white;\n        border: 1px solid #4f46e5;\n        padding: 0.5rem 1rem;\n        border-radius: 4px;\n        font-size: 0.875rem;\n        cursor: pointer;\n        transition: background-color 0.2s ease;\n        font-family: inherit;\n        outline: none;\n      }\n\n      .web-ide-bridge-btn:hover:not(:disabled) {\n        background: #4338ca;\n      }\n\n      .web-ide-bridge-btn:disabled {\n        background: #9ca3af;\n        border-color: #9ca3af;\n        cursor: not-allowed;\n      }\n\n      .web-ide-bridge-btn:focus {\n        box-shadow: 0 0 0 2px rgba(79, 70, 229, 0.5);\n      }\n\n      .web-ide-bridge-container {\n        margin-top: 0.5rem;\n      }\n\n      .web-ide-bridge-file-type {\n        margin-left: 0.5rem;\n        padding: 0.25rem 0.5rem;\n        border: 1px solid #ccc;\n        border-radius: 3px;\n        font-size: 0.8rem;\n      }\n    `;\n  }\n\n  /**\n   * Inject buttons for elements matching selector\n   */\n  _injectButtonsForSelector(config) {\n    let elements = document.querySelectorAll(config.selector);\n\n    // Filter by include/exclude selectors\n    elements = Array.from(elements).filter(element => {\n      if (config.excludeSelector && element.matches(config.excludeSelector)) {\n        return false;\n      }\n      if (config.includeOnlySelector && !element.matches(config.includeOnlySelector)) {\n        return false;\n      }\n      return true;\n    });\n\n    elements.forEach(textarea => {\n      if (!textarea.id) {\n        textarea.id = 'web-ide-bridge-textarea-' + generateUUID();\n      }\n\n      // Skip if button already exists\n      if (this.injectedButtons.has(textarea.id)) {\n        return;\n      }\n\n      // Additional check: look for existing buttons in the DOM\n      const existingButton = textarea.parentNode.querySelector(`[data-textarea-id=\"${textarea.id}\"]`);\n      if (existingButton) {\n        // Button exists in DOM but not in our tracking - add it to tracking\n        this.injectedButtons.set(textarea.id, existingButton);\n        return;\n      }\n\n      const fileType = textarea.getAttribute(config.fileTypeAttribute) || config.defaultFileType;\n\n      this._createAndInjectButton(textarea, {\n        ...config,\n        fileType\n      });\n    });\n  }\n\n  /**\n   * Create and inject button for textarea\n   */\n  _createAndInjectButton(textarea, config) {\n    const container = document.createElement('div');\n    container.className = 'web-ide-bridge-container';\n\n    const button = document.createElement('button');\n    button.className = config.buttonClass;\n    button.textContent = config.buttonText;\n    button.dataset.textareaId = textarea.id;\n    button.dataset.fileType = config.fileType;\n    button.dataset.originalText = config.buttonText;\n\n    // Set initial button state based on connection\n    this._updateButtonState(button);\n\n    // Button click handler\n    button.addEventListener('click', async () => {\n      if (!this.webIdeBridge.isConnected()) {\n        alert('Please connect to Web-IDE-Bridge server first');\n        return;\n      }\n\n      try {\n        const code = textarea.value;\n        const fileType = button.dataset.fileType;\n        await this.webIdeBridge.editCodeSnippet(textarea.id, code, fileType);\n      } catch (error) {\n        console.error('Failed to send code to IDE:', error);\n        alert('Failed to send code to IDE: ' + error.message);\n      }\n    });\n\n    container.appendChild(button);\n\n    // Position the container\n    switch (config.position) {\n      case 'before':\n        textarea.parentNode.insertBefore(container, textarea);\n        break;\n      case 'after':\n        textarea.parentNode.insertBefore(container, textarea.nextSibling);\n        break;\n      case 'append':\n        textarea.parentNode.appendChild(container);\n        break;\n      default:\n        textarea.parentNode.insertBefore(container, textarea.nextSibling);\n    }\n\n    this.injectedButtons.set(textarea.id, button);\n\n    // Register status callback only once for all buttons\n    if (!this.statusCallbackRegistered) {\n      this.webIdeBridge.onStatusChange((status) => {\n        this.updateButtonStates(status.serverConnected);\n      });\n      this.statusCallbackRegistered = true;\n    }\n\n    return button;\n  }\n\n  /**\n   * Watch for DOM changes to auto-inject buttons for new textareas\n   */\n  _watchForDOMChanges(config) {\n    const observer = new MutationObserver((mutations) => {\n      let shouldRefresh = false;\n\n      mutations.forEach((mutation) => {\n        if (mutation.type === 'childList') {\n          // Check if any added nodes contain textareas\n          mutation.addedNodes.forEach((node) => {\n            if (node.nodeType === Node.ELEMENT_NODE) {\n              if (node.matches && node.matches(config.selector)) {\n                shouldRefresh = true;\n              } else if (node.querySelector && node.querySelector(config.selector)) {\n                shouldRefresh = true;\n              }\n            }\n          });\n        }\n      });\n\n      if (shouldRefresh) {\n        // Debounce refresh to avoid excessive calls\n        setTimeout(() => {\n          this._injectButtonsForSelector(config);\n        }, 100);\n      }\n    });\n\n    observer.observe(document.body, {\n      childList: true,\n      subtree: true\n    });\n\n    this.observers.push(observer);\n  }\n}\n","/**\n * Utility functions for Web-IDE-Bridge browser library\n */\n\n/**\n * Generate a UUID v4\n */\nexport function generateUUID() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n      const r = Math.random() * 16 | 0;\n      const v = c === 'x' ? r : (r & 0x3 | 0x8);\n      return v.toString(16);\n    });\n  }\n\n  /**\n   * Validate WebSocket server URL\n   */\n  export function validateServerUrl(url) {\n    if (!url || typeof url !== 'string') {\n      return false;\n    }\n\n    try {\n      const urlObj = new URL(url);\n      return urlObj.protocol === 'ws:' || urlObj.protocol === 'wss:';\n    } catch {\n      return false;\n    }\n  }\n\n  /**\n   * Debounce function calls\n   */\n  export function debounce(func, wait, immediate = false) {\n    let timeout;\n\n    return function executedFunction(...args) {\n      const later = () => {\n        timeout = null;\n        if (!immediate) func.apply(this, args);\n      };\n\n      const callNow = immediate && !timeout;\n      clearTimeout(timeout);\n      timeout = setTimeout(later, wait);\n\n      if (callNow) func.apply(this, args);\n    };\n  }\n\n  /**\n   * Throttle function calls\n   */\n  export function throttle(func, limit) {\n    let inThrottle;\n\n    return function executedFunction(...args) {\n      if (!inThrottle) {\n        func.apply(this, args);\n        inThrottle = true;\n        setTimeout(() => inThrottle = false, limit);\n      }\n    };\n  }\n\n  /**\n   * Deep clone an object\n   */\n  export function deepClone(obj) {\n    if (obj === null || typeof obj !== 'object') {\n      return obj;\n    }\n\n    if (obj instanceof Date) {\n      return new Date(obj.getTime());\n    }\n\n    if (obj instanceof Array) {\n      return obj.map(item => deepClone(item));\n    }\n\n    if (typeof obj === 'object') {\n      const clonedObj = {};\n      for (const key in obj) {\n        if (obj.hasOwnProperty(key)) {\n          clonedObj[key] = deepClone(obj[key]);\n        }\n      }\n      return clonedObj;\n    }\n  }\n\n  /**\n   * Escape HTML entities\n   */\n  export function escapeHtml(text) {\n    const div = document.createElement('div');\n    div.textContent = text;\n    return div.innerHTML;\n  }\n\n  /**\n   * Parse file type from filename or extension\n   */\n  export function parseFileType(filename) {\n    if (!filename || typeof filename !== 'string') {\n      return 'txt';\n    }\n\n    const extension = filename.split('.').pop().toLowerCase();\n\n    const typeMap = {\n      'js': 'js',\n      'jsx': 'jsx',\n      'ts': 'ts',\n      'tsx': 'tsx',\n      'css': 'css',\n      'scss': 'scss',\n      'sass': 'scss',\n      'less': 'less',\n      'html': 'html',\n      'htm': 'html',\n      'xml': 'xml',\n      'json': 'json',\n      'yaml': 'yaml',\n      'yml': 'yaml',\n      'py': 'py',\n      'python': 'py',\n      'java': 'java',\n      'cpp': 'cpp',\n      'cc': 'cpp',\n      'cxx': 'cpp',\n      'c': 'c',\n      'h': 'c',\n      'php': 'php',\n      'rb': 'rb',\n      'ruby': 'rb',\n      'go': 'go',\n      'rs': 'rs',\n      'rust': 'rs',\n      'sh': 'sh',\n      'bash': 'sh',\n      'zsh': 'sh',\n      'sql': 'sql',\n      'md': 'md',\n      'markdown': 'md',\n      'txt': 'txt',\n      'text': 'txt'\n    };\n\n    return typeMap[extension] || 'txt';\n  }\n\n  /**\n   * Format file size in human readable format\n   */\n  export function formatFileSize(bytes) {\n    if (bytes === 0) return '0 Bytes';\n\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];\n  }\n\n  /**\n   * Get language name from file type\n   */\n  export function getLanguageName(fileType) {\n    const languageMap = {\n      'js': 'JavaScript',\n      'jsx': 'React JSX',\n      'ts': 'TypeScript',\n      'tsx': 'React TSX',\n      'css': 'CSS',\n      'scss': 'SCSS',\n      'less': 'Less',\n      'html': 'HTML',\n      'xml': 'XML',\n      'json': 'JSON',\n      'yaml': 'YAML',\n      'py': 'Python',\n      'java': 'Java',\n      'cpp': 'C++',\n      'c': 'C',\n      'php': 'PHP',\n      'rb': 'Ruby',\n      'go': 'Go',\n      'rs': 'Rust',\n      'sh': 'Shell',\n      'sql': 'SQL',\n      'md': 'Markdown',\n      'txt': 'Plain Text'\n    };\n\n    return languageMap[fileType] || 'Unknown';\n  }\n\n  /**\n   * Check if the current environment supports WebSockets\n   */\n  export function isWebSocketSupported() {\n    return typeof WebSocket !== 'undefined';\n  }\n\n  /**\n   * Get browser information\n   */\n  export function getBrowserInfo() {\n    const userAgent = navigator.userAgent;\n    let browser = 'Unknown';\n    let version = 'Unknown';\n\n    if (userAgent.indexOf('Chrome') > -1) {\n      browser = 'Chrome';\n      version = userAgent.match(/Chrome\\/(\\d+)/)?.[1] || 'Unknown';\n    } else if (userAgent.indexOf('Firefox') > -1) {\n      browser = 'Firefox';\n      version = userAgent.match(/Firefox\\/(\\d+)/)?.[1] || 'Unknown';\n    } else if (userAgent.indexOf('Safari') > -1) {\n      browser = 'Safari';\n      version = userAgent.match(/Safari\\/(\\d+)/)?.[1] || 'Unknown';\n    } else if (userAgent.indexOf('Edge') > -1) {\n      browser = 'Edge';\n      version = userAgent.match(/Edge\\/(\\d+)/)?.[1] || 'Unknown';\n    }\n\n    return { browser, version, userAgent };\n  }\n\n  /**\n   * Simple localStorage wrapper with error handling\n   */\n  export const storage = {\n    get(key, defaultValue = null) {\n      try {\n        const item = localStorage.getItem(key);\n        return item ? JSON.parse(item) : defaultValue;\n      } catch {\n        return defaultValue;\n      }\n    },\n\n    set(key, value) {\n      try {\n        localStorage.setItem(key, JSON.stringify(value));\n        return true;\n      } catch {\n        return false;\n      }\n    },\n\n    remove(key) {\n      try {\n        localStorage.removeItem(key);\n        return true;\n      } catch {\n        return false;\n      }\n    },\n\n    clear() {\n      try {\n        localStorage.clear();\n        return true;\n      } catch {\n        return false;\n      }\n    }\n  };\n\n  /**\n   * Create a promise that resolves after a delay\n   */\n  export function delay(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  /**\n   * Retry a function with exponential backoff\n   */\n  export async function retry(fn, options = {}) {\n    const {\n      retries = 3,\n      delay: baseDelay = 1000,\n      factor = 2,\n      maxDelay = 10000\n    } = options;\n\n    let lastError;\n\n    for (let i = 0; i <= retries; i++) {\n      try {\n        return await fn();\n      } catch (error) {\n        lastError = error;\n\n        if (i === retries) {\n          throw lastError;\n        }\n\n        const delayMs = Math.min(baseDelay * Math.pow(factor, i), maxDelay);\n        await delay(delayMs);\n      }\n    }\n  }\n\n  /**\n   * Check if a value is a valid UUID\n   */\n  export function isValidUUID(uuid) {\n    const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;\n    return uuidRegex.test(uuid);\n  }\n\n  /**\n   * Safe JSON parse with error handling\n   */\n  export function safeJsonParse(jsonString, defaultValue = null) {\n    try {\n      return JSON.parse(jsonString);\n    } catch {\n      return defaultValue;\n    }\n  }\n\n  /**\n   * Safe JSON stringify with error handling\n   */\n  export function safeJsonStringify(obj, defaultValue = '{}') {\n    try {\n      return JSON.stringify(obj);\n    } catch {\n      return defaultValue;\n    }\n  }\n\n  /**\n   * Create a cancellable promise\n   */\n  export function createCancellablePromise(promise) {\n    let cancelled = false;\n\n    const cancellablePromise = new Promise((resolve, reject) => {\n      promise.then(\n        value => cancelled ? reject(new Error('Promise cancelled')) : resolve(value),\n        error => cancelled ? reject(new Error('Promise cancelled')) : reject(error)\n      );\n    });\n\n    cancellablePromise.cancel = () => {\n      cancelled = true;\n    };\n\n    return cancellablePromise;\n  }\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { generateUUID, validateServerUrl, debounce } from './utils.js';\nimport { UIManager } from './ui.js';\n\n// Version from webpack DefinePlugin\nconst VERSION = process.env.VERSION || '1.0.0';\n\n/**\n * Web-IDE-Bridge Client Library\n * Provides seamless integration between web applications and desktop IDEs\n */\nclass WebIdeBridge {\n  constructor(userId, options = {}) {\n    // Validate required parameters\n    if (!userId || typeof userId !== 'string') {\n      throw new Error('userId is required and must be a string');\n    }\n\n    // Configuration\n    this.userId = userId;\n    this.connectionId = options.connectionId || generateUUID(); // Allow custom connectionId\n    this.options = {\n      serverUrl: 'ws://localhost:8071/web-ide-bridge/ws',\n      autoReconnect: true,\n      reconnectInterval: 5000,\n      maxReconnectAttempts: 10,\n      heartbeatInterval: 30000,\n      connectionTimeout: 10000,\n      debug: false,\n      addButtons: true,\n      ...options\n    };\n\n    // Validate server URL\n    if (!validateServerUrl(this.options.serverUrl)) {\n      throw new Error('Invalid server URL format');\n    }\n\n    // Connection state\n    this.ws = null;\n    this.connected = false;\n    this.connecting = false;\n    this.desktopConnected = false;\n    this.reconnectAttempts = 0;\n    this.reconnectTimeout = null;\n    this.heartbeatTimeout = null;\n    this.connectionTimeout = null;\n\n    // Event handlers\n    this.statusCallbacks = [];\n    this.codeUpdateCallbacks = [];\n    this.errorCallbacks = [];\n    this.messageCallbacks = [];\n\n    // UI Manager for auto-injection features\n    this.uiManager = new UIManager(this);\n\n    // Debounced methods\n    this.debouncedReconnect = debounce(this._attemptReconnect.bind(this), 1000);\n\n    this._log('WebIdeBridge initialized', { userId, connectionId: this.connectionId });\n  }\n\n  /**\n   * Handle connection acknowledgment from server\n   */\n  _handleConnectionAck(message) {\n    this._log('Connection acknowledged by server');\n\n    // Now send browser connection message\n    const connectMessage = {\n      type: 'browser_connect',\n      connectionId: this.connectionId,\n      userId: this.userId,\n      timestamp: Date.now()\n    };\n\n    this._sendMessage(connectMessage);\n    this._startHeartbeat();\n  }\n\n  /**\n   * Connect to the Web-IDE-Bridge server\n   */\n  async connect() {\n    if (this.connected || this.connecting) {\n      this._log('Already connected or connecting');\n      return;\n    }\n\n    this.connecting = true;\n    this._updateStatus({\n      serverConnected: false,\n      desktopConnected: false\n    });\n\n    try {\n      await this._establishConnection();\n      this.reconnectAttempts = 0;\n      this._log('Successfully connected to server');\n    } catch (error) {\n      this.connecting = false;\n      this._handleConnectionError(error);\n      throw error;\n    }\n  }\n\n  /**\n   * Disconnect from the server\n   */\n  disconnect() {\n    this._log('Disconnecting from server');\n\n    // Clear all timeouts\n    this._clearTimeouts();\n\n    // Disable auto-reconnect\n    this.options.autoReconnect = false;\n\n    // Close WebSocket connection\n    if (this.ws) {\n      this.ws.close(1000, 'Client disconnect');\n      this.ws = null;\n    }\n\n    this.connected = false;\n    this.connecting = false;\n    this._updateStatus('disconnected');\n  }\n\n  /**\n   * Check if connected to server\n   */\n  isConnected() {\n    return this.connected;\n  }\n\n  /**\n   * Get current connection status\n   */\n  getConnectionState() {\n    return {\n      serverConnected: this.connected,\n      desktopConnected: this.desktopConnected\n    };\n  }\n\n  /**\n   * Send code snippet to IDE for editing\n   */\n  async editCodeSnippet(textareaId, code, fileType = 'txt') {\n    if (!this.connected) {\n      throw new Error('Not connected to server');\n    }\n\n    if (!textareaId || typeof textareaId !== 'string') {\n      throw new Error('textareaId is required and must be a string');\n    }\n\n    if (typeof code !== 'string') {\n      throw new Error('code must be a string');\n    }\n\n    const message = {\n      type: 'edit_request',\n      connectionId: this.connectionId,\n      userId: this.userId,\n      snippetId: textareaId,\n        code,\n        fileType: fileType || 'txt',\n        timestamp: Date.now()\n    };\n\n    this._log('Sending edit request', { textareaId, fileType });\n    this._sendMessage(message);\n\n    return textareaId;\n  }\n\n  /**\n   * Register callback for status changes\n   */\n  onStatusChange(callback) {\n    if (typeof callback !== 'function') {\n      throw new Error('Callback must be a function');\n    }\n    this.statusCallbacks.push(callback);\n\n    // Immediately call with current status\n    const currentState = this.getConnectionState();\n    this._log('onStatusChange called immediately with state', currentState);\n    callback(currentState);\n  }\n\n  /**\n   * Register callback for code updates from IDE\n   */\n  onCodeUpdate(callback) {\n    if (typeof callback !== 'function') {\n      throw new Error('Callback must be a function');\n    }\n    this.codeUpdateCallbacks.push(callback);\n  }\n\n  /**\n   * Register callback for errors\n   */\n  onError(callback) {\n    if (typeof callback !== 'function') {\n      throw new Error('Callback must be a function');\n    }\n    this.errorCallbacks.push(callback);\n  }\n\n  /**\n   * Register callback for all messages (debugging)\n   */\n  onMessage(callback) {\n    if (typeof callback !== 'function') {\n      throw new Error('Callback must be a function');\n    }\n    this.messageCallbacks.push(callback);\n  }\n\n  /**\n   * Auto-inject \"Edit in IDE\" buttons for textareas\n   */\n  autoInjectButtons(options = {}) {\n    return this.uiManager.autoInjectButtons(options);\n  }\n\n  /**\n   * Manually inject button for specific textarea\n   */\n  injectButton(textareaElement, options = {}) {\n    return this.uiManager.injectButton(textareaElement, options);\n  }\n\n  /**\n   * Remove all injected buttons\n   */\n  removeInjectedButtons() {\n    this.uiManager.removeAllButtons();\n  }\n\n  // Private methods\n\n  /**\n   * Establish WebSocket connection\n   */\n  async _establishConnection() {\n    return new Promise((resolve, reject) => {\n      try {\n        this._log('Establishing WebSocket connection', { url: this.options.serverUrl });\n\n        this.ws = new WebSocket(this.options.serverUrl);\n\n        // Set connection timeout\n        this.connectionTimeout = setTimeout(() => {\n          if (this.ws.readyState !== WebSocket.OPEN) {\n            this.ws.close();\n            reject(new Error('Connection timeout'));\n          }\n        }, this.options.connectionTimeout);\n\n        this.ws.onopen = () => {\n          clearTimeout(this.connectionTimeout);\n          this._log('WebSocket connection opened');\n          this._handleConnectionOpen();\n          resolve();\n        };\n\n        this.ws.onmessage = (event) => {\n          this._handleMessage(event);\n        };\n\n        this.ws.onclose = (event) => {\n          this._handleConnectionClose(event);\n        };\n\n        this.ws.onerror = (error) => {\n          clearTimeout(this.connectionTimeout);\n          this._log('WebSocket error', error);\n          reject(new Error('WebSocket connection failed'));\n        };\n\n      } catch (error) {\n        clearTimeout(this.connectionTimeout);\n        reject(error);\n      }\n    });\n  }\n\n  /**\n   * Handle successful connection\n   */\n  _handleConnectionOpen() {\n    this.connected = true;\n    this.connecting = false;\n\n    // Update status first\n    this._updateStatus({\n      serverConnected: true,\n      desktopConnected: this.desktopConnected\n    });\n\n    // Send browser connection message with our connectionId\n    const connectMessage = {\n      type: 'browser_connect',\n      connectionId: this.connectionId,\n      userId: this.userId,\n      timestamp: Date.now()\n    };\n\n    setTimeout(() => { // Use setTimeout to ensure WebSocket is ready\n      try {\n        this._sendMessage(connectMessage);\n        this._startHeartbeat();\n        if (this.options.addButtons) { this.autoInjectButtons(); }\n      } catch (error) { this._log('Error in connection open handler', error); }\n    }, 0);\n  }\n\n  /**\n   * Handle connection close\n   */\n  _handleConnectionClose(event) {\n    this._log('WebSocket connection closed', { code: event.code, reason: event.reason });\n\n    this.connected = false;\n    this.connecting = false;\n    this._clearTimeouts();\n    this._updateStatus({\n      serverConnected: false,\n      desktopConnected: false\n    });\n\n    // Attempt reconnection if enabled\n    if (this.options.autoReconnect && event.code !== 1000) {\n      this._scheduleReconnect();\n    }\n  }\n\n  /**\n   * Handle connection errors\n   */\n  _handleConnectionError(error) {\n    this._log('Connection error', error);\n    this._triggerErrorCallbacks(error.message || 'Connection failed');\n\n    if (this.options.autoReconnect) {\n      this._scheduleReconnect();\n    }\n  }\n\n  /**\n   * Handle incoming WebSocket messages\n   */\n  _handleMessage(event) {\n    try {\n      const message = JSON.parse(event.data);\n      \n      // For code_update messages, log a summary instead of full content\n      if (message.type === 'code_update' && message.code) {\n        this._log('Received code_update message', {\n          type: message.type,\n          snippetId: message.snippetId,\n          codeLength: message.code.length,\n          codePreview: message.code.length > 100 \n            ? `${message.code.substring(0, 100)}...${message.code.substring(message.code.length - 20)}`\n            : message.code\n        });\n      } else {\n        this._log('Received message', message);\n      }\n\n      // Trigger message callbacks\n      this.messageCallbacks.forEach(callback => {\n        try {\n          callback(message);\n        } catch (error) {\n          this._log('Error in message callback', error);\n        }\n      });\n\n      // Handle specific message types\n      switch (message.type) {\n        case 'connection_ack':\n          this._log('Connection acknowledged by server');\n          break;\n\n        case 'code_update':\n          this._handleCodeUpdate(message);\n          break;\n\n        case 'status_update':\n          this._handleStatusUpdate(message);\n          break;\n\n        case 'pong':\n          this._log('Received pong from server');\n          break;\n\n        case 'error':\n          this._handleServerError(message);\n          break;\n\n        default:\n          this._log('Unknown message type', message.type);\n      }\n\n    } catch (error) {\n      this._log('Error parsing message', error);\n      this._log('Raw message data', event.data);\n      this._triggerErrorCallbacks('Failed to parse server message: ' + error.message);\n    }\n  }\n\n  /**\n   * Handle code update from IDE\n   */\n  _handleCodeUpdate(message) {\n    if (!message.snippetId || !message.code) {\n      this._log('Invalid code update message - missing snippetId or code', message);\n      return;\n    }\n\n    const { snippetId, code } = message;\n    this._log('Received code update', { snippetId, codeLength: code.length });\n\n    // snippetId is the textareaId in the protocol\n    const textareaId = snippetId;\n\n    // Trigger code update callbacks\n    this.codeUpdateCallbacks.forEach(callback => {\n      try {\n        callback(textareaId, code);\n      } catch (error) {\n        this._log('Error in code update callback', error);\n      }\n    });\n  }\n\n  /**\n   * Handle status updates from server\n   */\n  _handleStatusUpdate(message) {\n    const desktopConnected = message.desktopConnected || false;\n    this._log('Status update from server', { desktopConnected });\n    this.desktopConnected = desktopConnected;\n    this._updateStatus({\n      serverConnected: this.connected,\n      desktopConnected: this.desktopConnected\n    });\n  }\n\n  /**\n   * Handle server error messages\n   */\n  _handleServerError(message) {\n    const errorMsg = message.payload?.message || 'Unknown server error';\n    this._log('Server error', errorMsg);\n    this._triggerErrorCallbacks(errorMsg);\n  }\n\n  /**\n   * Send message to server\n   */\n  _sendMessage(message) {\n    if (!this.ws || this.ws.readyState !== WebSocket.OPEN) {\n      throw new Error('WebSocket not connected');\n    }\n\n    try {\n      this.ws.send(JSON.stringify(message));\n      this._log('Sent message', message);\n    } catch (error) {\n      this._log('Error sending message', error);\n      throw new Error('Failed to send message to server');\n    }\n  }\n\n  /**\n   * Start heartbeat mechanism\n   */\n  _startHeartbeat() {\n    this._clearHeartbeat();\n\n    if (this.options.heartbeatInterval > 0) {\n      this.heartbeatTimeout = setTimeout(() => {\n        if (this.connected) {\n          try {\n            this._sendMessage({\n              type: 'ping',\n              connectionId: this.connectionId,\n              timestamp: Date.now()\n            });\n            this._startHeartbeat(); // Schedule next heartbeat\n          } catch (error) {\n            this._log('Heartbeat failed', error);\n          }\n        }\n      }, this.options.heartbeatInterval);\n    }\n  }\n\n  /**\n   * Clear heartbeat timeout\n   */\n  _clearHeartbeat() {\n    if (this.heartbeatTimeout) {\n      clearTimeout(this.heartbeatTimeout);\n      this.heartbeatTimeout = null;\n    }\n  }\n\n  /**\n   * Schedule reconnection attempt\n   */\n  _scheduleReconnect() {\n    if (this.reconnectAttempts >= this.options.maxReconnectAttempts) {\n      this._log('Max reconnect attempts reached');\n      this._triggerErrorCallbacks('Max reconnection attempts exceeded');\n      return;\n    }\n\n    const delay = Math.min(\n      this.options.reconnectInterval * Math.pow(2, this.reconnectAttempts),\n      30000 // Max 30 seconds\n    );\n\n    this._log(`Scheduling reconnect attempt ${this.reconnectAttempts + 1} in ${delay}ms`);\n\n    this.reconnectTimeout = setTimeout(() => {\n      this.debouncedReconnect();\n    }, delay);\n  }\n\n  /**\n   * Attempt to reconnect\n   */\n  async _attemptReconnect() {\n    if (this.connected || this.connecting) {\n      return;\n    }\n\n    this.reconnectAttempts++;\n    this._log(`Reconnect attempt ${this.reconnectAttempts}`);\n\n    try {\n      await this.connect();\n    } catch (error) {\n      this._log('Reconnect failed', error);\n      if (this.reconnectAttempts < this.options.maxReconnectAttempts) {\n        this._scheduleReconnect();\n      }\n    }\n  }\n\n  /**\n   * Clear all timeouts\n   */\n  _clearTimeouts() {\n    if (this.reconnectTimeout) {\n      clearTimeout(this.reconnectTimeout);\n      this.reconnectTimeout = null;\n    }\n\n    if (this.connectionTimeout) {\n      clearTimeout(this.connectionTimeout);\n      this.connectionTimeout = null;\n    }\n\n    this._clearHeartbeat();\n  }\n\n  /**\n   * Update connection status and trigger callbacks\n   */\n  _updateStatus(status) {\n    this._log('Status changed to', status);\n\n    // Update internal state based on status\n    if (typeof status === 'string') {\n      // Legacy string status - update server connection\n      this.connected = status === 'connected';\n    } else if (typeof status === 'object') {\n      // New object status - update both server and desktop\n      this.connected = status.serverConnected || false;\n      this.desktopConnected = status.desktopConnected || false;\n    }\n\n    // Get current state and trigger callbacks\n    const currentState = this.getConnectionState();\n    this._log('Triggering status callbacks with state', currentState);\n    this.statusCallbacks.forEach(callback => {\n      try {\n        callback(currentState);\n      } catch (error) {\n        this._log('Error in status callback', error);\n      }\n    });\n  }\n\n  /**\n   * Trigger error callbacks\n   */\n  _triggerErrorCallbacks(error) {\n    this.errorCallbacks.forEach(callback => {\n      try {\n        callback(error);\n      } catch (error) {\n        this._log('Error in error callback', error);\n      }\n    });\n  }\n\n  /**\n   * Internal logging\n   */\n  _log(message, data = null) {\n    if (this.options.debug) {\n      const logMessage = `[WebIdeBridge] ${message}`;\n      if (data) {\n        // Handle large objects (like code_update messages)\n        if (typeof data === 'object' && data.code && data.code.length > 100) {\n          const shortenedData = {\n            ...data,\n            code: `${data.code.substring(0, 100)}...${data.code.substring(data.code.length - 20)} (${data.code.length} chars total)`\n          };\n          console.log(logMessage, shortenedData);\n        } else {\n          console.log(logMessage, data);\n        }\n      } else {\n        console.log(logMessage);\n      }\n    }\n  }\n}\n\nexport default WebIdeBridge;\n"],"names":["generateUUID","UIManager","constructor","webIdeBridge","injectedButtons","Map","observers","styles","initialized","statusCallbackRegistered","autoInjectButtons","options","defaultOptions","selector","buttonText","buttonClass","position","fileTypeAttribute","defaultFileType","excludeSelector","includeOnlySelector","watchForChanges","style","showFileTypeSelector","config","_initializeStyles","_injectButtonsForSelector","_watchForDOMChanges","refresh","destroy","removeAllButtons","injectButton","textareaElement","tagName","Error","fileType","id","_createAndInjectButton","forEach","button","parentNode","removeChild","clear","observer","disconnect","removeButton","textareaId","get","delete","updateButtonStates","connected","_updateButtonState","serverConnected","isConnected","disabled","textContent","dataset","originalText","title","styleElement","document","createElement","css","_getModernButtonStyles","_getMinimalButtonStyles","head","appendChild","elements","querySelectorAll","Array","from","filter","element","matches","textarea","has","existingButton","querySelector","set","getAttribute","container","className","addEventListener","alert","code","value","editCodeSnippet","error","console","message","insertBefore","nextSibling","onStatusChange","status","MutationObserver","mutations","shouldRefresh","mutation","type","addedNodes","node","nodeType","Node","ELEMENT_NODE","setTimeout","observe","body","childList","subtree","push","replace","c","r","Math","random","v","toString","validateServerUrl","url","urlObj","URL","protocol","debounce","func","wait","immediate","timeout","executedFunction","args","later","apply","callNow","clearTimeout","throttle","limit","inThrottle","deepClone","obj","Date","getTime","map","item","clonedObj","key","hasOwnProperty","escapeHtml","text","div","innerHTML","parseFileType","filename","extension","split","pop","toLowerCase","typeMap","formatFileSize","bytes","k","sizes","i","floor","log","parseFloat","pow","toFixed","getLanguageName","languageMap","isWebSocketSupported","WebSocket","getBrowserInfo","userAgent","navigator","browser","version","indexOf","match","storage","defaultValue","localStorage","getItem","JSON","parse","setItem","stringify","remove","removeItem","delay","ms","Promise","resolve","retry","fn","retries","baseDelay","factor","maxDelay","lastError","delayMs","min","isValidUUID","uuid","uuidRegex","test","safeJsonParse","jsonString","safeJsonStringify","createCancellablePromise","promise","cancelled","cancellablePromise","reject","then","cancel","VERSION","process","env","WebIdeBridge","userId","connectionId","serverUrl","autoReconnect","reconnectInterval","maxReconnectAttempts","heartbeatInterval","connectionTimeout","debug","addButtons","ws","connecting","desktopConnected","reconnectAttempts","reconnectTimeout","heartbeatTimeout","statusCallbacks","codeUpdateCallbacks","errorCallbacks","messageCallbacks","uiManager","debouncedReconnect","_attemptReconnect","bind","_log","_handleConnectionAck","connectMessage","timestamp","now","_sendMessage","_startHeartbeat","connect","_updateStatus","_establishConnection","_handleConnectionError","_clearTimeouts","close","getConnectionState","snippetId","callback","currentState","onCodeUpdate","onError","onMessage","removeInjectedButtons","readyState","OPEN","onopen","_handleConnectionOpen","onmessage","event","_handleMessage","onclose","_handleConnectionClose","onerror","reason","_scheduleReconnect","_triggerErrorCallbacks","data","codeLength","length","codePreview","substring","_handleCodeUpdate","_handleStatusUpdate","_handleServerError","errorMsg","payload","send","_clearHeartbeat","logMessage","shortenedData"],"sourceRoot":""}